<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>All Registers</title>
<style> 
   body {
        font-family:'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
        position: fixed;
        background-color: #000000;
        width: 100vw;
        height: 100vh;
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        justify-content: center;
        color: #f2f2f2;
       
       
    }
    @keyframes slideOutToLeft {
    from {
        transform: translateX(0);
    }
    to {
        transform: translateX(-100%);
    }
}


    h1 {
        text-align: center;
        margin-top: 20px;
    }

    div {
        
        width: 80%;
      
    }

    label {
        font-weight: bold;
    }

    input[type="text"] {
        padding: 5px;
        width: 70%;
        margin-right: 10px;
    }

    button {
        padding: 5px 10px;
        background-color: #007bff;
        color: white;
        border: none;
        cursor: pointer;
    }

    button:hover {
        background-color: #0056b3;
    }

    #tableDiv {
        width: 100%;
        border-collapse: collapse;
        margin-top: 0px;
        height: 85%;
        font-size: 15px;
        color: #fffefe;
        overflow-x: auto;
        background: -webkit-linear-gradient(#62a0a8,#7c63a5);
    }

    th, td {
        border: 2px solid #fffcfc;
        padding: 8px;
        text-align: left;
        cursor: pointer;
        border-right: 0px;
        border-bottom: 0px;
        border-radius: 3px;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    th {
        background:-webkit-linear-gradient(#62a0a8,#644b8f);
    }
    }
     td:hover{
     background-color: #4b4747;
    transition: background-color 0.2s ease;
    }
    #detailView {
        display: none;
        position: absolute;
        top: 50%;
        left: 70%;
        transform: translate(-50%, -50%);
        cursor: move;
        background:repeating-linear-gradient(#eee,#dd80d1);
        padding: 20px;
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        border-radius: 5px;
        z-index: 1000;
        animation: fadeIn 0.5s;
        width: 40vw;
        height: 60vh;
        overflow: auto;
        color: #000000;
    }
    
    #detailView h2 {
    margin-top: 0;
    font-size: 24px;
    color: #333;
    border-bottom: 1px solid #ccc;
    padding-bottom: 10px;
}

#detailView p {
    margin-bottom: 10px;
    font-size: 16px;
    line-height: 1.5;
    border: 1px outset rgb(255, 255, 255);
    box-shadow: 2px 2px rgba(0,0,0,0.3);
    border-radius: 2%;
}

#detailView ul {
    list-style-type: none;
    padding: 0;
}

#detailView li {
    margin-bottom: 5px;
}

#detailView button {
    padding: 5px 10px;
    background-color: #e4d761;
    color: white;
    border: none;
    cursor: pointer;
    margin-left: 200px;
}

#detailView button:hover {
    background-color: #769ec9;
}

    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translate(-50%, -50%) scale(0.5);
        }
        to {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
        }
    }

    #detailView h2 {
        margin-top: 0;
    }

    #detailView ul {
        list-style-type: none;
        padding: 0;
    }

    #detailView li {
        margin-bottom: 5px;
    }
    .tab{
    width: 95vw;
    height: 80vh;
    background: linear-gradient(135deg, #e0e0e0, #ffffff);
    border-radius: 20px 20px 10px 10px;
    box-shadow: 0 8px 4px rgba(255, 255, 255, 0.5), 
                0 16px 12px rgba(255, 255, 255, 0.5), 
                0 20px 28px rgba(255, 255, 255, 0.5);
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden;
    position: relative;
    border: 2px outset #000000;
    margin-right: 0%;
    
    }

    #toggleDetailViewButton {
       
        top: 10px;
        left: 10px;
        z-index: 1001; /* Ensure the button is above the detail view */
        padding: 5px 10px;
        background-color: #e6f061;
        color: rgb(0, 0, 0);
        border: none;
        cursor: pointer;
       
    }
    
.sidebar {
   height: 100vh;
   width: 0;
   position: fixed;
   top: 0;
   left: 0;
   background: -webkit-linear-gradient(#f6f9fa,#77c09c);
   overflow-x: hidden;
   transition: 0.5s;
   padding-top: 0px;
   display: flex;
   flex-direction: column;
   gap: 30px;
   z-index: 1001;
}
.sidebar a {
   padding: 10px 15px;
   text-decoration: none;
   font-size: 25px;
   color: #000000;
   display: block;
   transition: 0.3s;
 
}
.sidebar a:hover {
   color: #f1f1f1;
}


.content {
   flex: 1;
   padding: 20px;
   transition: margin-left 0.5s;
}
.new{
display: flex;
background-color: #000000;
padding: 10px 20px;
flex-direction: row;
width: 100vw;
align-items: center;
gap: 50%;
position: relative;
padding-top: 0;
}
.toggle-btx{
  width: 50%;  
}
span{
font-size: 20px;
}
.highlight {
    background-color: rgb(233, 233, 218);
    color: black;
} 
    
</style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.4/xlsx.full.min.js"></script>
</head>
<body>
<span><h>Register(3 of 1)</h></span>
<div class="new">

    <div class="sidebar" id="sidebar">
        <button class="toggle-btx" onclick="toggleSidebar()">☰</button>
     <a href="Register3of1.html">Register(3 of 1)</a>
     <a href="Register4.html">Register4</a>
      <a href="Register5.html">Register5</a>
      <a class="Logout" href="Dashboard.html">Home</a>
    </div>
   
<button class="toggle-btn" onclick="toggleSidebar()">☰</button>
<button id="toggleDetailViewButton" onclick="toggleHoldDetailView()">Detail view </button>
</div>


<div>
    <label for="searchInput">Search:</label>
    <input type="text" id="searchInput" placeholder="Enter search keyword...">
 
</div>
<div class="tab">
<div id="tableDiv"></div>
</div>
<div id="detailView"></div>

<script>
var jsonData = [];

var excelFileUrl = "https://docs.google.com/spreadsheets/d/1uZuW4r-rAhTXLcGMmI-Xh_9CzDi5aZ4WRUKdnziPC5k/export?format=xlsx";

fetch(excelFileUrl)
    .then(response => response.arrayBuffer())
    .then(data => {
        var workbook = XLSX.read(new Uint8Array(data), { type: "array" });
        var sheetName = workbook.SheetNames[0];
        var sheet = workbook.Sheets[sheetName];
        jsonData = XLSX.utils.sheet_to_json(sheet, {
            header: 1,
            raw: false,
            dateNF: 'yyyy-mm-dd',
            cellDates: true,
            defval: '-------'
        });

        displayTable();
    })
    .catch(error => console.error("Error loading Excel file:", error));

function generateRows() {
    var tableRows = "";
    for (var i = 0; i < jsonData.length; i++) {
        var row = jsonData[i];
        var rowHtml = "<tr>";
        for (var j = 0; j < row.length; j++) {
            var cellValue = row[j] === '' ? '-------' : row[j];
            rowHtml += "<td>" + cellValue + "</td>";
        }
        rowHtml += "</tr>";
        tableRows += rowHtml;
    }
    return tableRows;
}

function displayTable() {
    var table = "<table>";
    table += "<tr>";
    for (var k = 0; k < jsonData[0].length; k++) {
        table += "<th>" + jsonData[0][k] + "</th>";
    }
    table += "</tr>";
    table += generateRows();
    table += "</table>";
    document.getElementById("tableDiv").innerHTML = table;

    // Add click event listener to each row
    var rows = document.querySelectorAll("tr");
    rows.forEach(function(row, index) {
        if (index !== 0) { // Skip header row
            row.addEventListener("click", function() {
                showDetailView(index);
            });
        }
    });
}

var holdDetailView = false;
var holdTimer;

function showDetailView(index) {
    var detailView = document.getElementById("detailView");
    var row = jsonData[index - 1]; // Adjust index to match JSON data
    var labels = ["ರಜಿಷ್ಟರ್ ನಂಬರ್", "ಪೂರ್ಣ ಹೆಸರು", " ಜಾತಿ ಹಾಗೂ ಒಳಭೇದ", "ಹುಟ್ಟಿದ ಊರು","ಕ್ರಿಸ್ತೀ ಶತಮಾನದಂತೆ ಹುಟ್ಟಿದ ತಾರಿಖು ತಿಂಗಳ ಇಸ್ವಿ","ಯಾವ  ಶಾಲಾದಿಂದ ವ ಇಯತ್ತೇಯಿಂದ ಬಂದನು(ಹೊಸದಾಗಿ ಬಂದಿದ್ದರೆ ಹಾಗೆ ಬರೆಯಬೇಕು)","ಶಾಲೆಯಲ್ಲಿ ತೆಗೆದುಕೊಂಡ ತಾರಿಖು","ಯಾವಈಯತ್ತೇಯಲ್ಲಿ ಹಾಗೂ ಯಾವ ವರ್ಗದಲ್ಲಿ ದಾಖಲು ಮಾಡಿದ್ದು","ಫೀ ಕಕೊಡುವವನು ಅಥವಾ ಮಾಫಿ.","ಪಾಲಕನು ಲೋಕಲ್ ಫಂಡು ಕೊಡುವನೊ ಇಲ್ಲೋ","ಶಾಲೆಯನ್ನು ಬಿಟ್ಟ ತಾರಿಖು","ಯಾವ ಈಯತ್ತೇಯಲ್ಲಿ ಯಾವ ವರ್ಗದಿಂದ ಬಿಟ್ಟದ್ದು","ಅಭ್ಯಾಸ","ನಡತೆ","ಶಾಲೆಯನ್ನು ಬೀಡುವ ಕಾರಣ ಫಿ ಕೊಟ್ಟರುವನೊ ಇಲ್ಲವೊ ಇತ್ಯಾದಿ","ಸರ್ಟಿಫಿಕೇಟ ಮುಟ್ಟಿದ ಬಗ್ಗೆ ಸಹಿ ಮತ್ತು ತಾರೀಖು"]; // Your desired labels
    var detailHtml = "";
    for (var i = 0; i < row.length; i++) {
        detailHtml += "<p><strong>" + labels[i] + ":</strong> " + row[i] + "</p>";
    }
    detailView.innerHTML = detailHtml;
    detailView.style.display = "block";

    // Reset any existing hold timer
    clearTimeout(holdTimer);

    if (!holdDetailView) {
        // Add a timeout to hide the detail view after 2 seconds
        holdTimer = setTimeout(function() {
            detailView.style.display = "none";
        }, 10000);
    }
}

// Function to toggle hold/unhold on detail view
function toggleHoldDetailView() {
    holdDetailView = !holdDetailView;
    if (holdDetailView) {
        clearTimeout(holdTimer);
    } else {
        // Restart the timer if unholding
        holdTimer = setTimeout(function() {
            document.getElementById("detailView").style.display = "none";
        }, 2000);
    }
}



document.getElementById("searchInput").addEventListener("keyup", function() {
    var input, filter, table, tr, td, i, j, txtValue;
    input = document.getElementById("searchInput");
    filter = input.value.toUpperCase();
    table = document.getElementsByTagName("table")[0];
    tr = table.getElementsByTagName("tr");
    
    // Remove highlight class from all cells in the third column
    var allThirdColumnCells = document.querySelectorAll("td:nth-child(2)");
    allThirdColumnCells.forEach(function(cell) {
        cell.classList.remove("highlight");
    });
    
    // If search input is empty, display all rows; otherwise, perform search and highlight matching cells
    if (filter.trim() === "") {
        for (i = 1; i < tr.length; i++) {
            tr[i].style.display = "";
        }
    } else {
        for (i = 1; i < tr.length; i++) {
            tr[i].style.display = "none";
            td = tr[i].getElementsByTagName("td")[1]; // Search only in the third column (index 2)
            if (td) {
                txtValue = td.textContent || td.innerText;
                if (txtValue.toUpperCase().indexOf(filter) > -1) {
                    tr[i].style.display = "";
                    td.classList.add("highlight"); // Add highlight class to matching cells in the third column
                }
            }
        }
    }
});

function toggleHoldDetailView() {
    var detailView = document.getElementById("detailView");
    holdDetailView = !holdDetailView;
    if (holdDetailView) {
        clearTimeout(holdTimer);
        detailView.style.display = "block";
        detailView.style.animation = "slideInFromLeft 0.5s forwards";
    } else {
        detailView.style.animation = "slideOutToLeft 0.5s forwards";
        // Add a timeout to hide the detail view after the animation completes
        setTimeout(function() {
            detailView.style.display = "none";
        }, 500);
    }
}
function toggleSidebar() {
    var sidebar = document.getElementById("sidebar");
    if (sidebar.style.width === "250px") {
        sidebar.style.width = "0";
    } else {
        sidebar.style.width = "250px";
    }
 }
</script>
</body>
</html>

